CREATE TABLE `airtable_configs` (
	`id` int AUTO_INCREMENT NOT NULL,
	`name` varchar(255) NOT NULL,
	`apiKey` varchar(255) NOT NULL,
	`baseId` varchar(255) NOT NULL,
	`tableId` varchar(255) NOT NULL,
	`viewId` varchar(255),
	`fieldMappings` text NOT NULL,
	`syncEnabled` boolean NOT NULL DEFAULT false,
	`syncFrequency` enum('manual','hourly','daily','weekly') NOT NULL DEFAULT 'manual',
	`lastSyncedAt` timestamp,
	`lastSyncStatus` enum('success','failed','in_progress'),
	`lastSyncError` text,
	`createdBy` int NOT NULL,
	`createdAt` timestamp NOT NULL DEFAULT (now()),
	`updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,
	CONSTRAINT `airtable_configs_id` PRIMARY KEY(`id`)
);
--> statement-breakpoint
CREATE TABLE `cap_table_entries` (
	`id` int AUTO_INCREMENT NOT NULL,
	`snapshotId` int NOT NULL,
	`holderType` enum('founder','investor','employee','advisor','other') NOT NULL,
	`holderName` varchar(255) NOT NULL,
	`investorId` int,
	`shares` bigint NOT NULL,
	`equityPercentage` decimal(5,2) NOT NULL,
	`shareClass` varchar(50) NOT NULL DEFAULT 'Common',
	`fullyDilutedShares` bigint,
	`fullyDilutedPercentage` decimal(5,2),
	`notes` text,
	`createdAt` timestamp NOT NULL DEFAULT (now()),
	CONSTRAINT `cap_table_entries_id` PRIMARY KEY(`id`)
);
--> statement-breakpoint
CREATE TABLE `cap_table_snapshots` (
	`id` int AUTO_INCREMENT NOT NULL,
	`name` varchar(255) NOT NULL,
	`date` timestamp NOT NULL,
	`preMoneyValuation` decimal(15,2),
	`postMoneyValuation` decimal(15,2),
	`totalShares` bigint,
	`pricePerShare` decimal(10,4),
	`campaignId` int,
	`notes` text,
	`createdAt` timestamp NOT NULL DEFAULT (now()),
	`updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,
	CONSTRAINT `cap_table_snapshots_id` PRIMARY KEY(`id`)
);
--> statement-breakpoint
CREATE TABLE `follow_up_reminders` (
	`id` int AUTO_INCREMENT NOT NULL,
	`investorId` int NOT NULL,
	`campaignId` int,
	`title` varchar(255) NOT NULL,
	`description` text,
	`dueDate` timestamp NOT NULL,
	`priority` enum('low','medium','high','critical') NOT NULL DEFAULT 'medium',
	`status` enum('pending','completed','cancelled','snoozed') NOT NULL DEFAULT 'pending',
	`completedAt` timestamp,
	`snoozedUntil` timestamp,
	`autoGenerated` boolean NOT NULL DEFAULT false,
	`triggerType` varchar(100),
	`assignedTo` int,
	`notes` text,
	`createdAt` timestamp NOT NULL DEFAULT (now()),
	`updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,
	CONSTRAINT `follow_up_reminders_id` PRIMARY KEY(`id`)
);
--> statement-breakpoint
CREATE TABLE `fundraising_campaigns` (
	`id` int AUTO_INCREMENT NOT NULL,
	`name` varchar(255) NOT NULL,
	`description` text,
	`targetAmount` decimal(15,2) NOT NULL,
	`raisedAmount` decimal(15,2) DEFAULT '0',
	`minimumInvestment` decimal(15,2),
	`valuation` decimal(15,2),
	`roundType` enum('pre_seed','seed','series_a','series_b','series_c','bridge','other') NOT NULL,
	`equityOffered` decimal(5,2),
	`startDate` timestamp,
	`targetCloseDate` timestamp,
	`actualCloseDate` timestamp,
	`status` enum('planning','active','paused','closed','cancelled') NOT NULL DEFAULT 'planning',
	`dataRoomId` int,
	`notes` text,
	`createdBy` int NOT NULL,
	`createdAt` timestamp NOT NULL DEFAULT (now()),
	`updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,
	CONSTRAINT `fundraising_campaigns_id` PRIMARY KEY(`id`)
);
--> statement-breakpoint
CREATE TABLE `investments` (
	`id` int AUTO_INCREMENT NOT NULL,
	`investorId` int NOT NULL,
	`campaignId` int NOT NULL,
	`amount` decimal(15,2) NOT NULL,
	`currency` varchar(3) NOT NULL DEFAULT 'USD',
	`equityPercentage` decimal(5,2),
	`valuation` decimal(15,2),
	`instrumentType` enum('equity','safe','convertible_note','warrant','other') NOT NULL DEFAULT 'equity',
	`status` enum('committed','wired','received','cancelled') NOT NULL DEFAULT 'committed',
	`commitmentDate` timestamp,
	`wireDate` timestamp,
	`receivedDate` timestamp,
	`documentIds` text,
	`notes` text,
	`createdAt` timestamp NOT NULL DEFAULT (now()),
	`updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,
	CONSTRAINT `investments_id` PRIMARY KEY(`id`)
);
--> statement-breakpoint
CREATE TABLE `investor_communications` (
	`id` int AUTO_INCREMENT NOT NULL,
	`investorId` int NOT NULL,
	`campaignId` int,
	`type` enum('email','whatsapp','call','meeting','linkedin','other') NOT NULL,
	`direction` enum('inbound','outbound') NOT NULL,
	`subject` varchar(500),
	`body` text,
	`fromEmail` varchar(320),
	`toEmail` varchar(320),
	`ccEmails` text,
	`emailThreadId` varchar(255),
	`whatsappPhone` varchar(32),
	`whatsappMessageId` varchar(255),
	`attachments` text,
	`sentAt` timestamp,
	`deliveredAt` timestamp,
	`readAt` timestamp,
	`repliedAt` timestamp,
	`sentiment` enum('positive','neutral','negative'),
	`aiSummary` text,
	`aiExtractedInfo` text,
	`userId` int,
	`createdAt` timestamp NOT NULL DEFAULT (now()),
	`updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,
	CONSTRAINT `investor_communications_id` PRIMARY KEY(`id`)
);
--> statement-breakpoint
CREATE TABLE `investors` (
	`id` int AUTO_INCREMENT NOT NULL,
	`name` varchar(255) NOT NULL,
	`email` varchar(320),
	`phone` varchar(32),
	`company` varchar(255),
	`title` varchar(255),
	`type` enum('angel','vc','family_office','strategic','accelerator','other') NOT NULL DEFAULT 'other',
	`status` enum('lead','contacted','interested','committed','invested','passed') NOT NULL DEFAULT 'lead',
	`linkedinUrl` varchar(512),
	`twitterHandle` varchar(100),
	`website` varchar(512),
	`address` text,
	`investmentFocus` text,
	`typicalCheckSize` decimal(15,2),
	`investmentStage` varchar(100),
	`source` varchar(255),
	`tags` text,
	`priority` enum('low','medium','high','critical') NOT NULL DEFAULT 'medium',
	`dataRoomId` int,
	`dataRoomVisitorId` int,
	`totalInvested` decimal(15,2) DEFAULT '0',
	`equityPercentage` decimal(5,2),
	`lastContactedAt` timestamp,
	`nextFollowUpAt` timestamp,
	`followUpNotes` text,
	`airtableId` varchar(255),
	`airtableLastSynced` timestamp,
	`ownerId` int,
	`notes` text,
	`createdAt` timestamp NOT NULL DEFAULT (now()),
	`updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,
	CONSTRAINT `investors_id` PRIMARY KEY(`id`)
);
