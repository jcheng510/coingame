{
  "query": "\nCREATE TABLE IF NOT EXISTS `aiAgentTasks` (\n  `id` int AUTO_INCREMENT NOT NULL,\n  `companyId` int,\n  `taskType` enum('generate_po', 'send_rfq', 'send_quote_request', 'send_email', 'update_inventory', 'create_shipment', 'generate_invoice', 'reconcile_payment', 'reorder_materials', 'vendor_followup') NOT NULL,\n  `status` enum('pending_approval', 'approved', 'rejected', 'in_progress', 'completed', 'failed', 'cancelled') NOT NULL DEFAULT 'pending_approval',\n  `priority` enum('low', 'medium', 'high', 'urgent') NOT NULL DEFAULT 'medium',\n  `taskData` text NOT NULL,\n  `aiReasoning` text,\n  `aiConfidence` decimal(5, 2),\n  `relatedEntityType` varchar(50),\n  `relatedEntityId` int,\n  `requiresApproval` boolean NOT NULL DEFAULT true,\n  `approvalThreshold` decimal(12, 2),\n  `approvedBy` int,\n  `approvedAt` timestamp,\n  `rejectedBy` int,\n  `rejectedAt` timestamp,\n  `rejectionReason` text,\n  `executedAt` timestamp,\n  `executionResult` text,\n  `errorMessage` text,\n  `retryCount` int DEFAULT 0,\n  `maxRetries` int DEFAULT 3,\n  `scheduledFor` timestamp,\n  `expiresAt` timestamp,\n  `createdAt` timestamp NOT NULL DEFAULT (now()),\n  `updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,\n  CONSTRAINT `aiAgentTasks_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE IF NOT EXISTS `aiAgentRules` (\n  `id` int AUTO_INCREMENT NOT NULL,\n  `companyId` int,\n  `name` varchar(255) NOT NULL,\n  `description` text,\n  `ruleType` enum('inventory_reorder', 'po_auto_generate', 'rfq_auto_send', 'vendor_followup', 'payment_reminder', 'shipment_tracking', 'price_alert', 'quality_check') NOT NULL,\n  `triggerCondition` text NOT NULL,\n  `actionConfig` text NOT NULL,\n  `requiresApproval` boolean NOT NULL DEFAULT true,\n  `autoApproveThreshold` decimal(12, 2),\n  `notifyUsers` text,\n  `isActive` boolean NOT NULL DEFAULT true,\n  `lastTriggeredAt` timestamp,\n  `triggerCount` int DEFAULT 0,\n  `createdBy` int,\n  `createdAt` timestamp NOT NULL DEFAULT (now()),\n  `updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,\n  CONSTRAINT `aiAgentRules_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE IF NOT EXISTS `aiAgentLogs` (\n  `id` int AUTO_INCREMENT NOT NULL,\n  `companyId` int,\n  `taskId` int,\n  `ruleId` int,\n  `action` varchar(100) NOT NULL,\n  `status` enum('info', 'success', 'warning', 'error') NOT NULL DEFAULT 'info',\n  `message` text NOT NULL,\n  `details` text,\n  `durationMs` int,\n  `tokensUsed` int,\n  `createdAt` timestamp NOT NULL DEFAULT (now()),\n  CONSTRAINT `aiAgentLogs_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE IF NOT EXISTS `emailTemplates` (\n  `id` int AUTO_INCREMENT NOT NULL,\n  `companyId` int,\n  `name` varchar(255) NOT NULL,\n  `templateType` enum('po_to_vendor', 'rfq_request', 'quote_request', 'shipment_confirmation', 'payment_reminder', 'vendor_followup', 'quality_issue', 'general') NOT NULL,\n  `subject` varchar(500) NOT NULL,\n  `bodyTemplate` text NOT NULL,\n  `isDefault` boolean DEFAULT false,\n  `isActive` boolean NOT NULL DEFAULT true,\n  `createdBy` int,\n  `createdAt` timestamp NOT NULL DEFAULT (now()),\n  `updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,\n  CONSTRAINT `emailTemplates_id` PRIMARY KEY(`id`)\n);\n",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway02.us-east-1.prod.aws.tidbcloud.com --port 4000 --user 3WiXecng1chg6se.408a3c215e81 --database 3o4cnYLmRMvo8cxB6kVVJ3 --execute \nCREATE TABLE IF NOT EXISTS `aiAgentTasks` (\n  `id` int AUTO_INCREMENT NOT NULL,\n  `companyId` int,\n  `taskType` enum('generate_po', 'send_rfq', 'send_quote_request', 'send_email', 'update_inventory', 'create_shipment', 'generate_invoice', 'reconcile_payment', 'reorder_materials', 'vendor_followup') NOT NULL,\n  `status` enum('pending_approval', 'approved', 'rejected', 'in_progress', 'completed', 'failed', 'cancelled') NOT NULL DEFAULT 'pending_approval',\n  `priority` enum('low', 'medium', 'high', 'urgent') NOT NULL DEFAULT 'medium',\n  `taskData` text NOT NULL,\n  `aiReasoning` text,\n  `aiConfidence` decimal(5, 2),\n  `relatedEntityType` varchar(50),\n  `relatedEntityId` int,\n  `requiresApproval` boolean NOT NULL DEFAULT true,\n  `approvalThreshold` decimal(12, 2),\n  `approvedBy` int,\n  `approvedAt` timestamp,\n  `rejectedBy` int,\n  `rejectedAt` timestamp,\n  `rejectionReason` text,\n  `executedAt` timestamp,\n  `executionResult` text,\n  `errorMessage` text,\n  `retryCount` int DEFAULT 0,\n  `maxRetries` int DEFAULT 3,\n  `scheduledFor` timestamp,\n  `expiresAt` timestamp,\n  `createdAt` timestamp NOT NULL DEFAULT (now()),\n  `updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,\n  CONSTRAINT `aiAgentTasks_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE IF NOT EXISTS `aiAgentRules` (\n  `id` int AUTO_INCREMENT NOT NULL,\n  `companyId` int,\n  `name` varchar(255) NOT NULL,\n  `description` text,\n  `ruleType` enum('inventory_reorder', 'po_auto_generate', 'rfq_auto_send', 'vendor_followup', 'payment_reminder', 'shipment_tracking', 'price_alert', 'quality_check') NOT NULL,\n  `triggerCondition` text NOT NULL,\n  `actionConfig` text NOT NULL,\n  `requiresApproval` boolean NOT NULL DEFAULT true,\n  `autoApproveThreshold` decimal(12, 2),\n  `notifyUsers` text,\n  `isActive` boolean NOT NULL DEFAULT true,\n  `lastTriggeredAt` timestamp,\n  `triggerCount` int DEFAULT 0,\n  `createdBy` int,\n  `createdAt` timestamp NOT NULL DEFAULT (now()),\n  `updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,\n  CONSTRAINT `aiAgentRules_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE IF NOT EXISTS `aiAgentLogs` (\n  `id` int AUTO_INCREMENT NOT NULL,\n  `companyId` int,\n  `taskId` int,\n  `ruleId` int,\n  `action` varchar(100) NOT NULL,\n  `status` enum('info', 'success', 'warning', 'error') NOT NULL DEFAULT 'info',\n  `message` text NOT NULL,\n  `details` text,\n  `durationMs` int,\n  `tokensUsed` int,\n  `createdAt` timestamp NOT NULL DEFAULT (now()),\n  CONSTRAINT `aiAgentLogs_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE IF NOT EXISTS `emailTemplates` (\n  `id` int AUTO_INCREMENT NOT NULL,\n  `companyId` int,\n  `name` varchar(255) NOT NULL,\n  `templateType` enum('po_to_vendor', 'rfq_request', 'quote_request', 'shipment_confirmation', 'payment_reminder', 'vendor_followup', 'quality_issue', 'general') NOT NULL,\n  `subject` varchar(500) NOT NULL,\n  `bodyTemplate` text NOT NULL,\n  `isDefault` boolean DEFAULT false,\n  `isActive` boolean NOT NULL DEFAULT true,\n  `createdBy` int,\n  `createdAt` timestamp NOT NULL DEFAULT (now()),\n  `updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,\n  CONSTRAINT `emailTemplates_id` PRIMARY KEY(`id`)\n);\n",
  "rows": [],
  "messages": [],
  "stdout": "",
  "stderr": "",
  "execution_time_ms": 713
}